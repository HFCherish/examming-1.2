<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.thoughtworks.ketsu.infrastructure.mybatis.mappers.AttendanceMapper">
    <insert id="save">
        INSERT INTO attendances (id, employee_id, from_date, to_date, description, present)
        VALUES (#{attendance.id}, #{attendance.employeeId}, #{attendance.fromDate}, #{attendance.toDate},  #{attendance.description}, #{attendance.present})
    </insert>

    <select id="findById" resultMap="records.attendance">
        SELECT
        <include refid="columns.attendance"/>
        FROM attendances A
        WHERE A.id = #{id}
    </select>

    <select id="findAll" resultMap="records.attendance">
        SELECT
        <include refid="columns.attendance"/>
        FROM attendances A
        <if test="employeeId != -1">
            WHERE A.employee_id = #{employeeId}
        </if>
    </select>

    <!--<select id="update">-->
        <!--UPDATE attendances SET-->
        <!--name = #{attendance.name},-->
        <!--department_id = #{attendance.departmentId},-->
        <!--role_id = #{attendance.roleId},-->
        <!--gender = #{attendance.gender}-->
        <!--WHERE id = #{id}-->
    <!--</select>-->

    <!--<select id="delete">-->
        <!--DELETE FROM attendances-->
        <!--WHERE id = #{id}-->
    <!--</select>-->

</mapper>
